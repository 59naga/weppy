<!DOCTYPE html> 
<html lang="en"> 
  <head>
    <meta charset=utf-8 /> 
    <title>Weppy Demo</title> 
    <style>
      * {
        font-family: sans-serif, arial, helvetica;
        font-size: 13px;
      }
    </style>
    <script src="weppy.js"></script>
  </head>
  <body onload="setTimeout(function(){WebM.processImages()},100)"> 
    <h1>Weppy Demo: WebP in modern browsers <i>today</i></h1> 
    <img src="tinybrot.webp">
    <h2>Demo Code</h2>
    <script src="http://gist.github.com/608701.js"> </script>
    <h2>How does it work?</h2>
    WebP is actually a lightweight container for a single VP8 frame (whereas WebM is a container based off Matroska meant for video). WebM support exists already in Chrome, Firefox and Opera, so all that's needed to render it is to do a little magic to convert the RIFF encoded WebP image into a EBML/Matroska encoded single frame WebM video, loading it in a &lt;video&gt;, using <tt>drawImage()</tt> on a &lt;canvas&gt; and replacing the <tt>.webp</tt> image with the data URL extracted from the &lt;canvas&gt; using <tt>toDataURL()</tt>.
    <h2>Issues</h2>
    <ul>
      <li>Chrome (on linux anyway) tends to crash a lot.</li>
      <li>Firefox throws a security exception when doing <tt>toDataURL()</tt> on a canvas after <tt>drawImage()</tt> of a video loaded from a data url. The hack being used it to replace the image node with the actual canvas instance.</li>
      <li>Opera doesn't work. I don't really have the time to investigate.</li>
    </ul>
    <h2>What Browsers?</h2>
    Chrome 7.0 and Firefox 4.0 were both tested. Opera doesn't work for reasons that I'm not sure about. I would appreciate it if someone fixes it and submits a patch :)

    <h2>Me</h2>
    I'm <a href='http://twitter.com/antimatter15'>@antimatter15</a> (please help me get my followed/following ratio over 1.0!). I know practically nothing about video, VP8, Matroska, EBML, WebP, WebM, codecs, binary, compression though all of them fascinate me, and I loved <a href="http://www.xiph.org/video/vid1.shtml">"A Digital Media Primer for Geeks"</a>. At time of writing I'm fifteen, though I don't find that much of an accomplishment. My site is at <a href="http://antimatter15.com">antimatter15.com</a> and hopefully you'll find some other cool stuff there too.
    
  </body> 
</html> 
